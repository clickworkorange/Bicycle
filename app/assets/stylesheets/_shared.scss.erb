
@use "<%= Rails.application.site_asset("_global.scss") %>" as *;

/* app/assets/_shared.scss */

body {
min-height: 100vh;
margin: 0;
background-color: $colour-body-bg;
color: $colour-text;
font-family: $font-family-body;
font-size: 110%;
line-height: 1.35em;
text-shadow: 1px 1px 1px $text-shadow-colour;
}

body > header {
display: flex;
position: relative;
align-items: center;
min-height: 3em;
padding: 0 .5em;
border-bottom: 1px solid $colour-edges;
background-color: $colour-bg;
box-shadow: 0 0 .5em .5em $shadow-colour;
z-index: 1;
}

main {
max-width: 60em;
margin: 0 auto;
box-shadow: 0 0 2em 2em $shadow-colour;
}

article {
background-color: $colour-bg;
}

p.notice, p.alert {
position: sticky;
top: 0;
height: 1.2em;
margin: 0 -1em;
margin-bottom: -2em;
padding: .35em .5em;
animation: hyperjump .3s ease-in 8s forwards;
// TODO: delay sibling animations by a further n seconds
z-index: 2;
}
    p.notice {
    color: $colour-notice-text;
    background-color: $colour-notice;
    }
    p.alert {
    color: $colour-alert-text;
    background-color: $colour-alert;
    }
    
@keyframes hyperjump {
from {transform: scaleX(1) scaleY(1);}
50% {transform: scaleX(1) scaleY(.3);}
to {transform: scaleX(0) scaleY(0); filter: blur(10px); color: white; background-color: white;}
}

h1, h2, h3 {
margin: 0;
margin-bottom: .5em;
//text-wrap: balance;
font-family: $font-family-heading;
//font-weight: normal;
font-weight: 100;
}
    h1 {
    font-size: 2em;
    line-height: 1em;
    }
    h2 {
    font-size: 1.5em;
    line-height: 1em;
    }
    h3 {
    font-size: 1.2em;
    line-height: 1em;
    }
p {
margin: 0;
margin-bottom: 1em;
}
a {
color: $colour-link;
text-decoration: none;
}
        a:visited, a:active {
        color: $colour-link-active;
        }
        *:focus-visible {
        outline: $focus-outline;
        outline-offset: 1px;
        }
b {
font-weight: bolder;
}
dl {
max-width: min-content;
}
    dt {
    margin-bottom: .5em;
    border-bottom: 1px dotted $colour-text;
    font-family: $font-family-heading;
    }
    dd {
    margin-bottom: 1em;
    margin-left: 0;
    padding: 0 .5em;
    }

label {
display: block;
}
option {
}
textarea, select, option, input, button {
font-family: $font-family-field;
font-size: 1em;
}
textarea, select, option, input:not([type=button],[type=submit],[type=checkbox],[type=radio]) {
box-sizing: border-box;
width: 100%;
padding: .5em;
border: $field-border;
background-color: $colour-field-bg;
color: $colour-field-text;
}
    textarea:valid, select:valid, input:valid {
    //border: 1px solid $green;
    }
    // TODO: use :invalid along with ~ (subsequent-sibling) to make a form appear in stages
    textarea:user-invalid, select:user-invalid, input:user-invalid {
    border-color: $colour-error;
    }
button, input[type=submit], input[type=button], a.button, body > nav label {
display: block;
padding: .5em;
border: none;
border-radius: .2em;
background-color: $colour-button-bg;
color: $colour-button-text;
text-align: center;
cursor: pointer;
}
    button:hover, input[type=submit]:hover, input[type=button]:hover, a.button:hover {
    background-color: lighten($colour-button-bg, 10%);
    }
    button.yes, input[type=submit].yes, input[type=button].yes, a.button.yes {
    background-color: $colour-yes;
    }
        button.yes:hover, input[type=submit].yes:hover, input[type=button].yes:hover, a.button.yes:hover {
        background-color: lighten($colour-yes, 10%);
        }
    button.no, input[type=submit].no, input[type=button].no, a.button.no {
    background-color: $colour-no;
    }
        button.no:hover, input[type=submit].no:hover, input[type=button].no:hover, a.button.no:hover {
        background-color: lighten($colour-no, 10%);
        }

    button:disabled, input[type=submit]:disabled, input[type=button]:disabled, a.button.disabled {
    background-color: $colour-disabled;
    cursor: default;
    }

dialog {
border: $dialog-border;
border-radius: .5em;
box-shadow: .2em .2em .5em 0 $shadow-colour;
background-color: $colour-bg-dialog;
color: $colour-text;
}
    dialog::backdrop {
    background-color: $modal-bg-colour;
    backdrop-filter: blur(5px);
    }
    dialog button {
    float: left;
    margin-right: 1em;
    }
    dialog button:last-child {
    margin: 0;
    }

details {
    margin-bottom: 1em;
    summary {
    margin-bottom: .5em;
    }
    p, table {
    margin-bottom: .8em;
    margin-left: 2em;
    }
    p + div {
    margin-bottom: .5em;
    }
    p:has(code) {
    margin-bottom: 1em;
    }
    p:has(+ div) {
    margin-bottom: 0;
    }
    div.highlighter-rouge {
    width: min-content;
    margin-left: 2em;
    }
    table.rouge-table {
    margin-right: 2em;
    margin-bottom: .5em;
    margin-left: .5em;
    }
    div.highlighter-rouge + p {
    margin-bottom: .2em;
    }
    pre.highlight {
    margin: 0;
    padding: 0;
    }
}

body > header, body > article, body > footer {
box-sizing: border-box;
}
