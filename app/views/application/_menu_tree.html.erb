<%= content_tag :li, class: @page.present? && @page.id == page.id ? "current" : nil do %>
  <%= content_tag(:div) do %>
    <% if page.child? %>
      <%= svg_icon(page.id == page.parent.children.last.id ? "last_child" : "child") %>
      <%= link_to full_page_path(page) do %>
        <%= svg_icon(page.template) %>
        <%= page.title %>
      <% end %>
    <% else %>
      <%= link_to full_page_path(page) do %>
        <%= svg_icon(page.template) %>
        <%= page.title %>
      <% end %>
    <% end %>
  <% end %>
<% end %>

<% if @page.present? && page.children.live.in_menu.any? && (@page.id == page.id || @page.is_descendant_of?(page)) %>
  <%= content_tag :ul do %>
    <%= render :partial => "menu_tree", collection: page.children.live.in_menu, as: :page %>
  <% end %>
<% end %>
